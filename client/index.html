<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de Tickets - Cordonnerie v1.24</title>
    <link rel="stylesheet" href="/src/assets/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- Syst√®me d'onglets -->
        <div class="tabs-header">
            <div class="app-version"
                style="position: absolute; top: 5px; right: 120px; font-size: 12px; color: #6b7280; font-weight: 500;">
                v1.24</div>

            <!-- Menu d√©roulant pour l'historique (d√©plac√© √† droite) -->
            <div class="history-menu" style="position: absolute; top: 5px; right: 10px;">
                <div class="menu-dropdown">
                    <button class="menu-btn" id="history-menu-btn">
                        <i class="fas fa-history"></i>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="menu-content" id="history-menu-content">
                        <a href="#" onclick="switchToTab('history'); return false;">
                            <i class="fas fa-search"></i> Rechercher tickets
                        </a>
                        <a href="#" onclick="switchToTab('stats'); return false;">
                            <i class="fas fa-chart-bar"></i> Statistiques
                        </a>
                        <a href="#" onclick="loadRecentTickets(); switchToTab('history'); return false;">
                            <i class="fas fa-clock"></i> Tickets r√©cents
                        </a>
                        <a href="#" onclick="exportTickets(); return false;">
                            <i class="fas fa-download"></i> Exporter donn√©es
                        </a>
                        <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;">
                        <a href="#" onclick="switchToTab('backup'); return false;">
                            <i class="fas fa-shield-alt"></i> Sauvegardes
                        </a>
                        <a href="#" onclick="createManualBackup(); return false;">
                            <i class="fas fa-save"></i> Cr√©er sauvegarde
                        </a>
                    </div>
                </div>
            </div>

            <div class="tabs-list" id="tabs-list">
                <div class="tab active" data-tab-id="1">
                    <span class="tab-title">Ticket 1</span>
                    <button class="tab-close" title="Fermer l'onglet">√ó</button>
                </div>
                <div class="tab" data-tab-id="history">
                    <span class="tab-title">üìú Historique</span>
                </div>
                <div class="tab" data-tab-id="stats">
                    <span class="tab-title">üìä Statistiques</span>
                </div>
                <div class="tab" data-tab-id="backup">
                    <span class="tab-title">üõ°Ô∏è Sauvegardes</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Sidebar gauche : Tickets r√©cents -->
            <div class="left-sidebar">
                <div class="left-sidebar-header">
                    <h3>üìã Tickets r√©cents</h3>
                    <button id="refresh-recent-btn" class="btn-refresh" title="Actualiser">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <div id="recent-tickets-left" class="recent-tickets-left"></div>
            </div>

            <div class="tab-content active" id="tab-content-1">
                <div class="form-content">
                    <div class="form-section">
                        <div class="customer-search-container">
                            <div class="nom-prenom-reset-row">
                                <input type="text" id="nom" placeholder="Nom (commencez √† taper pour rechercher)"
                                    class="input-field customer-search" autocomplete="off">
                                <input type="text" id="prenom" placeholder="Pr√©nom" class="input-field"
                                    autocomplete="off">
                                <button id="reinitialiser" class="btn-reset">üîÑ R√©initialiser</button>
                            </div>
                            <div id="suggestions-list" class="suggestions-list"></div>
                        </div>
                        <div class="telephone-email-row">
                            <input type="tel" id="telephone" placeholder="T√©l√©phone" class="input-field"
                                autocomplete="off" maxlength="14" pattern="[0-9\s]*" inputmode="numeric"
                                style="width: 160px;">
                            <input type="email" id="email" placeholder="Email (facultatif)" class="input-field"
                                autocomplete="off" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                title="Veuillez saisir une adresse email valide" style="margin-left: 0;">
                            <button id="create-customer-btn" class="btn-create-customer"
                                title="Cr√©er un nouveau client dans Shopify"
                                style="white-space: nowrap; height: 40px; padding: 8px 12px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user-plus"></i> Cr√©er client
                            </button>
                        </div>

                    </div>

                    <!-- Section compacte : Paires + Prestations c√¥te √† c√¥te -->
                    <div class="compact-paires-prestations">
                        <!-- Colonne de gauche : Paires -->
                        <div class="paires-column">
                            <span class="label-compact">Paires :</span>
                            <div class="paires-buttons-compact">
                                <button class="paire-btn compact" data-paires="1">1P</button>
                                <button class="paire-btn compact" data-paires="2">2P</button>
                                <button class="paire-btn compact" data-paires="3">3P</button>
                                <button class="paire-btn compact" data-paires="4">4P</button>
                                <button class="paire-btn compact" data-paires="5">5P</button>
                                <button class="paire-btn compact" data-paires="6">6P</button>
                                <button class="paire-btn compact" data-paires="7">7P</button>
                                <button class="paire-btn compact" data-paires="8">8P</button>
                                <select id="paires-select" class="paire-select-compact"
                                    onchange="handlePairesSelectChange(event)">
                                    <option value="">+</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                    <option value="24">24</option>
                                    <option value="25">25</option>
                                </select>
                            </div>
                            <div id="paires-prestations" class="paires-prestations-compact"></div>
                        </div>

                        <!-- Colonne de droite : Prestations -->
                        <div class="prestations-column hidden-until-paires" id="prestations-section">
                            <span class="label-compact">Prestations :</span>
                            <div class="prestations-grid">
                                <!-- Patins -->
                                <div class="prestation-group">
                                    <span class="group-label">Patins :</span>
                                    <div class="prestation-buttons-row">
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Patins cr√™pe" data-prix="28">Cr√™pe</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Patins mat" data-prix="39">Mat</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Patins miroir" data-prix="39">Miroir</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Patins √©pais" data-prix="40">√âpais</button>
                                    </div>
                                </div>

                                <!-- Fers -->
                                <div class="prestation-group">
                                    <span class="group-label">Fers :</span>
                                    <div class="prestation-buttons-row">
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Fers Triumph" data-prix="25">Triumph</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Fers LULU" data-prix="25">LULU</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Fers pointes" data-prix="7">Pointes</button>
                                    </div>
                                </div>

                                <!-- Talons -->
                                <div class="prestation-group">
                                    <span class="group-label">Talons :</span>
                                    <div class="prestation-buttons-row">
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons cuir" data-prix="29">Cuir</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons super" data-prix="25">Super</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Bloc talons" data-prix="40">Bloc</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons crant√©" data-prix="30">Crant√©</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons aiguilles" data-prix="15">Aiguilles</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons vibram" data-prix="22">Vibram</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons dainite" data-prix="35">Dainite</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Talons ridgeway" data-prix="35">Ridgeway</button>
                                    </div>
                                </div>

                                <!-- Ressemelage -->
                                <div class="prestation-group">
                                    <span class="group-label">Ressemelage :</span>
                                    <div class="prestation-buttons-row">
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Ressemelage cuir" data-prix="195">Cuir</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Ressemelage caoutchouc" data-prix="185">Caoutchouc</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Ressemelage birkenstock" data-prix="60">Birkenstock</button>
                                    </div>
                                </div>

                                <!-- Autres -->
                                <div class="prestation-group">
                                    <span class="group-label">Autres :</span>
                                    <div class="prestation-buttons-row">
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Glissoir" data-prix="20">Glissoir</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Glissoir bottine" data-prix="30">Glissoir B</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Mise en forme" data-prix="20">Forme</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Collage" data-prix="10">Collage</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Entretien" data-prix="25">Entretien</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Couture/Pi√®ce" data-prix="10">Couture/Pi√®ce</button>
                                        <button class="prestation-btn draggable mini" draggable="true"
                                            data-type="Redresse" data-prix="10">Redresse</button>
                                    </div>
                                </div>

                                <div class="custom-prestations-container">
                                    <button class="prestation-btn-custom mini" id="add-custom">+ Personnalis√©</button>
                                    <div id="custom-prestations-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="total-section hidden-until-paires" id="total-section">
                    <div class="total-header">
                        <strong>Total : <span id="total-prix">0.00</span> ‚Ç¨</strong>
                    </div>
                </div>

            </div>

            <!-- Onglet Historique -->
            <div class="tab-content" id="tab-content-history">
                <div class="history-section">
                    <div class="section">
                        <h3>üîç Recherche dans l'historique</h3>
                        <div class="search-container">
                            <input type="text" id="history-search"
                                placeholder="Rechercher par nom, t√©l√©phone ou num√©ro de ticket" class="input-field">
                            <button id="search-history-btn" class="btn-search">üîç Rechercher</button>
                        </div>
                        <div id="history-results" class="history-results"></div>
                    </div>

                    <div class="section">
                        <h3>üìã Tickets r√©cents</h3>
                        <div id="recent-tickets" class="recent-tickets"></div>
                    </div>
                </div>
            </div>

            <!-- Onglet Statistiques -->
            <div class="tab-content" id="tab-content-stats">
                <div class="stats-section">
                    <div class="section">
                        <h3>üìä Statistiques g√©n√©rales</h3>
                        <div id="stats-display" class="stats-display"></div>
                    </div>

                    <div class="section">
                        <h3>üìÖ R√©partition par jour de retrait</h3>
                        <div id="weekly-stats" class="weekly-stats"></div>
                    </div>
                </div>
            </div>

            <!-- Onglet Sauvegardes -->
            <div class="tab-content" id="tab-content-backup">
                <div class="backup-section">
                    <div class="section">
                        <h3>üõ°Ô∏è Gestion des sauvegardes</h3>
                        <div class="backup-controls">
                            <button id="create-backup-btn" class="btn-backup-create">
                                <i class="fas fa-save"></i> Cr√©er sauvegarde manuelle
                            </button>
                            <button id="refresh-backups-btn" class="btn-backup-refresh">
                                <i class="fas fa-sync"></i> Actualiser
                            </button>
                        </div>

                        <div class="backup-stats" id="backup-stats"></div>
                    </div>

                    <div class="section">
                        <h3>üìã Liste des sauvegardes</h3>
                        <div id="backups-list" class="backups-list"></div>
                    </div>
                </div>
            </div>

            <div class="ticket-client-sidebar">
                <div class="ticket-box ticket-cordonnier-container">
                    <h3>Ticket cordonnier :</h3>
                    <button id="imprimer-cordonnier" class="btn-print">üñ®Ô∏è Imprimer</button>

                    <!-- Boutons de paiement -->
                    <div class="payment-status"
                        style="margin-top: 10px; display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap;">
                        <button class="payment-btn payment-paid" id="payment-paid">Pay√©</button>
                        <button class="payment-btn payment-unpaid" id="payment-unpaid">Non pay√©</button>
                        <button class="payment-btn payment-remaining" id="payment-remaining">Reste √† payer</button>
                    </div>
                    <div class="remaining-amount-container" id="remaining-amount-container"
                        style="display: none; margin-top: 8px;">
                        <div class="remaining-amount-input">
                            <label for="remaining-amount"
                                style="font-size: 12px; font-weight: 500; color: #374151; margin-bottom: 4px; display: block;">Montant
                                restant (‚Ç¨) :</label>
                            <input type="number" id="remaining-amount" placeholder="0.00" step="0.01" min="0"
                                style="width: 100%; padding: 6px 8px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px;">
                            <div id="paid-amount-display" class="paid-amount-display"
                                style="margin-top: 4px; font-size: 11px; color: #6b7280; display: none;">
                                <span id="paid-amount-text"></span>
                            </div>
                            <div class="remaining-amount-actions" style="margin-top: 8px; display: flex; gap: 8px;">
                                <button id="confirm-remaining" class="btn-confirm-remaining"
                                    style="padding: 6px 12px; background: #059669; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">Confirmer</button>
                                <button id="cancel-remaining" class="btn-cancel-remaining"
                                    style="padding: 6px 12px; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">Annuler</button>
                            </div>
                        </div>
                    </div>

                    <!-- Section horaires -->
                    <div class="horaires-section" style="margin-top: 15px;">
                        <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #374151;">üìÖ Horaires de retrait</h4>

                        <!-- Ligne des jours -->
                        <div class="jours-buttons"
                            style="display: flex; gap: 4px; margin-bottom: 8px; flex-wrap: nowrap;">
                            <button class="jour-btn jour-btn-discouraged" data-jour="Mardi">Mardi</button>
                            <button class="jour-btn" data-jour="Mercredi">Mercredi</button>
                            <button class="jour-btn" data-jour="Jeudi">Jeudi</button>
                            <button class="jour-btn" data-jour="Vendredi">Vendredi</button>
                            <button class="jour-btn" data-jour="Samedi">Samedi</button>
                        </div>

                        <!-- Ligne: Heure, Pas urgent, Calendrier -->
                        <div class="heure-options-row" style="display: flex; gap: 6px; align-items: center;">
                            <div class="heure-select"
                                style="display: flex; align-items: center; gap: 4px; min-width: 0;">
                                <i class="fas fa-clock" style="font-size: 10px; color: #6b7280;"></i>
                                <select id="heure-retrait" style="min-width: 60px; font-size: 10px; padding: 4px 6px;">
                                    <option value="">Heure</option>
                                    <option value="09:00">* 09:00</option>
                                    <option value="10:00">* 10:00</option>
                                    <option value="11:00">* 11:00</option>
                                    <option value="12:00">* 12:00</option>
                                    <option value="13:00">* 13:00</option>
                                    <option value="14:00">14:00</option>
                                    <option value="15:00">15:00</option>
                                    <option value="16:00">16:00</option>
                                    <option value="17:00">17:00</option>
                                    <option value="18:00">18:00</option>
                                    <option value="19:00">19:00</option>
                                </select>
                            </div>
                            <button id="pas-urgent-btn" class="btn-pas-urgent" title="Pas urgent"
                                style="flex: 1; min-width: 0;">
                                Pas urgent
                            </button>
                            <!-- Menu d√©roulant pour les accessoires -->
                            <div class="sac-menu" style="position: relative; flex: 1;">
                                <button id="avec-sac-btn" class="btn-avec-sac" title="Accessoires"
                                    style="width: 100%; min-width: 0;">
                                    <i class="fas fa-shopping-bag"></i> Avec sac
                                    <i class="fas fa-chevron-down" style="margin-left: auto;"></i>
                                </button>
                                <div class="sac-menu-content" id="sac-menu-content"
                                    style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #d1d5db; border-radius: 6px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); z-index: 1000; margin-top: 2px;">
                                    <div class="sac-option" data-sac="sac">
                                        <input type="checkbox" id="sac-sac" class="sac-checkbox">
                                        <label for="sac-sac">Sac</label>
                                    </div>
                                    <div class="sac-option" data-sac="housses">
                                        <input type="checkbox" id="sac-housses" class="sac-checkbox">
                                        <label for="sac-housses">Housses</label>
                                    </div>
                                    <div class="sac-option" data-sac="embau choirs">
                                        <input type="checkbox" id="sac-embau choirs" class="sac-checkbox">
                                        <label for="sac-embau choirs">Embauchoirs</label>
                                    </div>
                                    <div class="sac-option" data-sac="boite">
                                        <input type="checkbox" id="sac-boite" class="sac-checkbox">
                                        <label for="sac-boite">Boite</label>
                                    </div>
                                </div>
                            </div>
                            <div class="calendar-container">
                                <button id="calendar-btn" class="btn-calendar" title="S√©lectionner une date">
                                    <i class="fas fa-calendar-alt"></i>
                                </button>
                                <input type="date" id="date-picker" class="date-picker" style="display: none;">
                            </div>
                        </div>

                        <!-- Champ note -->
                        <div class="note-section" style="margin-top: 15px;">
                            <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #374151;">üìù Note</h4>
                            <textarea id="note-retrait" placeholder="Ajouter une note (optionnel)" rows="2"
                                style="width: 100%; padding: 8px 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; resize: vertical; min-height: 40px; box-sizing: border-box;"></textarea>
                        </div>
                    </div>
                </div>
                <div class="ticket-box">
                    <h3>Ticket client :</h3>
                    <button id="imprimer-client" class="btn-print">üñ®Ô∏è Imprimer</button>

                    <!-- Recherche par ID -->
                    <div style="margin-top: 10px;">
                        <input type="text" id="search-id" placeholder="#XXXX" class="input-field" autocomplete="off"
                            maxlength="4" pattern="[0-9]*" inputmode="numeric"
                            style="width: 100%; font-weight: bold; font-family: monospace; font-size: 1.1em; letter-spacing: 1px; height: 40px; padding: 8px 10px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px;"
                            title="Rechercher par 4 derniers chiffres du t√©l√©phone">
                    </div>
                </div>
            </div>

            <!-- Sidebar actuelle : Tickets cordonnier/client -->
            <div class="ticket-client-sidebar">
                <div class="ticket-box ticket-cordonnier-container">
                    <h3>Ticket cordonnier :</h3>
                    <button id="imprimer-cordonnier" class="btn-print">üñ®Ô∏è Imprimer</button>

                    <!-- Boutons de paiement -->
                    <div class="payment-status"
                        style="margin-top: 10px; display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap;">
                        <button class="payment-btn payment-paid" id="payment-paid">Pay√©</button>
                        <button class="payment-btn payment-unpaid" id="payment-unpaid">Non pay√©</button>
                        <button class="payment-btn payment-remaining" id="payment-remaining">Reste √† payer</button>
                    </div>
                    <div class="remaining-amount-container" id="remaining-amount-container"
                        style="display: none; margin-top: 8px;">
                        <div class="remaining-amount-input">
                            <label for="remaining-amount"
                                style="font-size: 12px; font-weight: 500; color: #374151; margin-bottom: 4px; display: block;">Montant
                                restant (‚Ç¨) :</label>
                            <input type="number" id="remaining-amount" placeholder="0.00" step="0.01" min="0"
                                style="width: 100%; padding: 6px 8px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px;">
                            <div id="paid-amount-display" class="paid-amount-display"
                                style="margin-top: 4px; font-size: 11px; color: #6b7280; display: none;">
                                <span id="paid-amount-text"></span>
                            </div>
                            <div class="remaining-amount-actions" style="margin-top: 8px; display: flex; gap: 8px;">
                                <button id="confirm-remaining" class="btn-confirm-remaining"
                                    style="padding: 6px 12px; background: #059669; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">Confirmer</button>
                                <button id="cancel-remaining" class="btn-cancel-remaining"
                                    style="padding: 6px 12px; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">Annuler</button>
                            </div>
                        </div>
                    </div>

                    <!-- Section horaires -->
                    <div class="horaires-section" style="margin-top: 15px;">
                        <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #374151;">üìÖ Horaires de retrait</h4>

                        <!-- Ligne des jours -->
                        <div class="jours-buttons"
                            style="display: flex; gap: 4px; margin-bottom: 8px; flex-wrap: nowrap;">
                            <button class="jour-btn jour-btn-discouraged" data-jour="Mardi">Mardi</button>
                            <button class="jour-btn" data-jour="Mercredi">Mercredi</button>
                            <button class="jour-btn" data-jour="Jeudi">Jeudi</button>
                            <button class="jour-btn" data-jour="Vendredi">Vendredi</button>
                            <button class="jour-btn" data-jour="Samedi">Samedi</button>
                        </div>

                        <!-- Ligne: Heure, Pas urgent, Calendrier -->
                        <div class="heure-options-row" style="display: flex; gap: 6px; align-items: center;">
                            <div class="heure-select"
                                style="display: flex; align-items: center; gap: 4px; min-width: 0;">
                                <i class="fas fa-clock" style="font-size: 10px; color: #6b7280;"></i>
                                <select id="heure-retrait" style="min-width: 60px; font-size: 10px; padding: 4px 6px;">
                                    <option value="">Heure</option>
                                    <option value="09:00">* 09:00</option>
                                    <option value="10:00">* 10:00</option>
                                    <option value="11:00">* 11:00</option>
                                    <option value="12:00">* 12:00</option>
                                    <option value="13:00">* 13:00</option>
                                    <option value="14:00">14:00</option>
                                    <option value="15:00">15:00</option>
                                    <option value="16:00">16:00</option>
                                    <option value="17:00">17:00</option>
                                    <option value="18:00">18:00</option>
                                    <option value="19:00">19:00</option>
                                </select>
                            </div>
                            <button id="pas-urgent-btn" class="btn-pas-urgent" title="Pas urgent"
                                style="flex: 1; min-width: 0;">
                                Pas urgent
                            </button>
                            <!-- Menu d√©roulant pour les accessoires -->
                            <div class="sac-menu" style="position: relative; flex: 1;">
                                <button id="avec-sac-btn" class="btn-avec-sac" title="Accessoires"
                                    style="width: 100%; min-width: 0;">
                                    <i class="fas fa-shopping-bag"></i> Avec sac
                                    <i class="fas fa-chevron-down" style="margin-left: auto;"></i>
                                </button>
                                <div class="sac-menu-content" id="sac-menu-content"
                                    style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #d1d5db; border-radius: 6px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); z-index: 1000; margin-top: 2px;">
                                    <div class="sac-option" data-sac="sac">
                                        <input type="checkbox" id="sac-sac" class="sac-checkbox">
                                        <label for="sac-sac">Sac</label>
                                    </div>
                                    <div class="sac-option" data-sac="housses">
                                        <input type="checkbox" id="sac-housses" class="sac-checkbox">
                                        <label for="sac-housses">Housses</label>
                                    </div>
                                    <div class="sac-option" data-sac="embau choirs">
                                        <input type="checkbox" id="sac-embau choirs" class="sac-checkbox">
                                        <label for="sac-embau choirs">Embauchoirs</label>
                                    </div>
                                    <div class="sac-option" data-sac="boite">
                                        <input type="checkbox" id="sac-boite" class="sac-checkbox">
                                        <label for="sac-boite">Boite</label>
                                    </div>
                                </div>
                            </div>
                            <div class="calendar-container">
                                <button id="calendar-btn" class="btn-calendar" title="S√©lectionner une date">
                                    <i class="fas fa-calendar-alt"></i>
                                </button>
                                <input type="date" id="date-picker" class="date-picker" style="display: none;">
                            </div>
                        </div>

                        <!-- Champ note -->
                        <div class="note-section" style="margin-top: 15px;">
                            <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #374151;">üìù Note</h4>
                            <textarea id="note-retrait" placeholder="Ajouter une note (optionnel)" rows="2"
                                style="width: 100%; padding: 8px 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; resize: vertical; min-height: 40px; box-sizing: border-box;"></textarea>
                        </div>
                    </div>
                </div>
                <div class="ticket-box">
                    <h3>Ticket client :</h3>
                    <button id="imprimer-client" class="btn-print">üñ®Ô∏è Imprimer</button>

                    <!-- Recherche par ID -->
                    <div style="margin-top: 10px;">
                        <input type="text" id="search-id" placeholder="#XXXX" class="input-field" autocomplete="off"
                            maxlength="4" pattern="[0-9]*" inputmode="numeric"
                            style="width: 100%; font-weight: bold; font-family: monospace; font-size: 1.1em; letter-spacing: 1px; height: 40px; padding: 8px 10px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px;"
                            title="Rechercher par 4 derniers chiffres du t√©l√©phone">
                    </div>
                </div>
            </div>
        </div>


        <script src="/src/script_legacy.js"></script>
        <script type="module" src="/src/main.js"></script>
</body>

</html>